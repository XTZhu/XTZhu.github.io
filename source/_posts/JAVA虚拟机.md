---
title: JAVA 虚拟机 课堂笔记
date: 2019-02-10 19:05:58
tags: 虚拟机
---

# JAVA虚拟机

### 1.什么是java虚拟机？
指以软件的方式模拟具有完整硬件系统功能、运行在一个完全隔离环境中的完整计算机系统，是物理机的软件实现。

Class files => 	类加载子系统 =>  运行时数据区（内存）

内存： 堆、Java栈、本地方法栈、方法区、程序计数器。

> 堆、方法区：

> Java栈、本地方法栈、程序计数器：

- **本地方法栈（线程私有）**：登记native方法，在Execution Engine执行时加载本地方法库
- **程序计数器（线程私有）**：就是一个指针，指向方法区中的方法字节码（用来存储指向下一条指令的地址，也即将要执行的指令代码），由执行引擎读取下一条指令，是一个非常小的内存空间，几乎可以忽略不计。
- **方法区（线程共享）**：类的所有字段和方法字节码，以及一些特殊方法如构造函数，接口代码也在此定义。简单说，所有定义的方法的信息都保存在该区域，**静态变量+常量+类方法（构造函数/接口定义）+运行时常量池都存在方法区中**
- **Java栈（线程私有）**：Java线程执行方法的内存模型，一个线程对应一个栈，每个方法在执行的同时都会创建一个栈帧（用于存储局部变量表看，操作数栈，动态链接，方法出口等信息）不存在垃圾回收问题，只要线程一结束该栈就释放，生命周期与线程一致。
- JVM对该区域规范了两种异常：

	1）线程请求的栈深度大于虚拟机栈所允许的深度，将抛出StackOverFlowError异常
    
    2）若虚拟机栈可动态拓展，当无法申请到足够内存空间时将抛出OutOfMemoryError，通过jvm参数-Xss指定栈空间，空间大小决定函数调用的深度