---
title: 浅拷贝与深拷贝
date: 2019-05-10 16:06:32
tags: 
- 深拷贝
- javaScript
---

> 引用： http://jartto.wang/2016/03/19/js-deep-copy/

javascript之浅拷贝和深拷贝

# 什么是浅拷贝？
js中的赋值都为引用传递，这也就是说，在把一个对象赋值给一个变量（对象）,那么这个变量（对象）所指向的仍就是原来对象的地址，引用就是浅拷贝。

看概念我们可能不太容易理解，下面拿一个简单的栗子来说说吧：
示例：

``` js
var obj1={name:'jartto'};
var obj2={};
//复制obj1， 给obj2赋值
obj2=obj1;
console.log(obj2.name);//jartto
//更改obj2.name
obj2.name='somebody';
console.log(obj2.name);//somebody
console.log(obj1.name);//somebody
```

例子中可以看出，obj2更改了，obj1也被更改了。这说明name仍然存在公共的引用对象，我们的拷贝并不彻底，冒然的使用很有可能带来大的灾难。这时候深拷贝就该上场了，我们接着往下走。

#  什么是深拷贝？

深拷贝就是不仅复制对象的基本类,同时也复制原对象中的对象。就是说完全是新对象产生的，新对象所指向的不是原来对象的地址。

同上面的队形，我们还拿栗子来说事：
示例：
``` js
var arr1=[1,2,3];
var arr2=arr1.concat();
//输出arr2
console.log(arr2)
//更改arr2的值
arr2[0]=5;
console.log(arr1);//[1,2,3]
console.log(arr2);//[5,2,3]
```

arr2的值变化了，但是arr1的值并未受到影响。这也就告诉我们concat进行了一个深拷贝，arr2已经指向了新的引用地址。js中还有好多类似的例子，这里我就不一一说明啦，感兴趣你可以试试哦。

> “在有指针的情况下，浅拷贝只是增加了一个指针指向已经存在的内存，而深拷贝就是增加一个指针并且申请一个新的内存，使这个增加的指针指向这个新的内存，采用深拷贝的情况下，释放内存的时候就不会出现在浅拷贝时重复释放同一内存的错误！”